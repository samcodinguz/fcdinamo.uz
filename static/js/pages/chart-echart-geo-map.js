let worldMap=new CustomEChart({selector:"#world-map",options:()=>({tooltip:{trigger:"item",padding:[7,10],backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")},borderWidth:1,transitionDuration:0,formatter:"{b}"},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},series:[{type:"map",map:"world",roam:!0,scaleLimit:{min:1,max:5},left:0,right:0,label:{show:!1},itemStyle:{borderColor:theme("border-color"),areaColor:theme("chart-primary")},emphasis:{label:{show:!1},itemStyle:{areaColor:theme("chart-gamma")}}}]})}),usaMap=(worldMap.element.addEventListener("click",()=>{worldMap.chart.dispatchAction({type:"restore"})}),document.getElementById("usa-map")),mapBarMorphing=(usaMap&&fetch("assets/data/usa_geo.json").then(e=>e.json()).then(e=>{echarts.registerMap("USA",e,{Alaska:{left:-131,top:25,width:15},Hawaii:{left:-112,top:25,width:5},"Puerto Rico":{left:-76,top:26,width:2}});let t=new CustomEChart({selector:usaMap,options:()=>({tooltip:{trigger:"item",padding:[7,10],backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")},borderWidth:1,transitionDuration:0,formatter:"{b}"},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},geo:{map:"USA",roam:!0,zoom:1.2,center:[-98,37],scaleLimit:{min:1,max:5},itemStyle:{borderColor:theme("border-color"),areaColor:theme("chart-delta")},label:{color:"#fff"},emphasis:{label:{show:!0,color:"#fff"},itemStyle:{areaColor:theme("chart-gamma")}}},series:[{name:"USA Map",map:"USA",type:"map",geoIndex:0,zoom:1.2,roam:!0,scaleLimit:{min:1,max:5}}]})});t.element.addEventListener("click",()=>{t.chart.dispatchAction({type:"restore"})})}).catch(e=>console.log(e)),document.getElementById("map-bar-morphing")),pieChartOnMap=(mapBarMorphing&&fetch("assets/data/usa_geo.json").then(e=>e.json()).then(e=>{echarts.registerMap("USA",e,{Alaska:{left:-131,top:25,width:15},Hawaii:{left:-112,top:25,width:5},"Puerto Rico":{left:-76,top:26,width:2}});let t=[{name:"Alabama",value:4822023},{name:"Alaska",value:731449},{name:"Arizona",value:6553255},{name:"Arkansas",value:2949131},{name:"California",value:38041430},{name:"Colorado",value:5187582},{name:"Connecticut",value:3590347},{name:"Delaware",value:917092},{name:"District of Columbia",value:632323},{name:"Florida",value:19317568},{name:"Georgia",value:9919945},{name:"Hawaii",value:1392313},{name:"Idaho",value:1595728},{name:"Illinois",value:12875255},{name:"Indiana",value:6537334},{name:"Iowa",value:3074186},{name:"Kansas",value:2885905},{name:"Kentucky",value:4380415},{name:"Louisiana",value:4601893},{name:"Maine",value:1329192},{name:"Maryland",value:5884563},{name:"Massachusetts",value:6646144},{name:"Michigan",value:9883360},{name:"Minnesota",value:5379139},{name:"Mississippi",value:2984926},{name:"Missouri",value:6021988},{name:"Montana",value:1005141},{name:"Nebraska",value:1855525},{name:"Nevada",value:2758931},{name:"New Hampshire",value:1320718},{name:"New Jersey",value:8864590},{name:"New Mexico",value:2085538},{name:"New York",value:19570261},{name:"North Carolina",value:9752073},{name:"North Dakota",value:699628},{name:"Ohio",value:11544225},{name:"Oklahoma",value:3814820},{name:"Oregon",value:3899353},{name:"Pennsylvania",value:12763536},{name:"Rhode Island",value:1050292},{name:"South Carolina",value:4723723},{name:"South Dakota",value:833354},{name:"Tennessee",value:6456243},{name:"Texas",value:26059203},{name:"Utah",value:2855287},{name:"Vermont",value:626011},{name:"Virginia",value:8185867},{name:"Washington",value:6897012},{name:"West Virginia",value:1855413},{name:"Wisconsin",value:5726398},{name:"Wyoming",value:576412},{name:"Puerto Rico",value:3667084}];function a(){return{visualMap:{left:"right",min:5e5,max:38e6,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0,textStyle:{color:theme("light-text-emphasis")}},series:[{id:"population",type:"map",roam:!0,map:"USA",animationDurationUpdate:1e3,universalTransition:!0,data:t,label:{show:!1},emphasis:{label:{show:!1}}}],textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},tooltip:{trigger:"item",padding:[7,10],backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")},borderWidth:1,transitionDuration:0,formatter:function(e){return null!=e.value&&"-"!==e.value?`<strong>${e.name}</strong><br/>Population: `+e.value.toLocaleString():`<strong>${e.name}</strong><br/>No data`}}}}function o(){return{tooltip:{trigger:"axis",padding:[5,0],backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")},borderWidth:1,transitionDuration:.125,axisPointer:{type:"none"},shadowBlur:2,shadowColor:"rgba(76, 76, 92, 0.15)",shadowOffsetX:0,shadowOffsetY:1,formatter:function(e){var t=e[0].name;let a=`<div style="font-size: 14px; font-weight: 600; text-transform: uppercase; border-bottom: 1px solid ${theme("border-color")}; margin-bottom: 8px; padding: 3px 10px 8px;">${t}</div>`;return e.forEach(e=>{a+=`<div style="margin-top: 4px; padding: 3px 15px;">
                        <span style="display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;background-color:${e.color};"></span>
                        <strong>${e.value}</strong>
                    </div>`}),a}},xAxis:{type:"value",axisLabel:{color:theme("body-color"),margin:15},splitLine:{show:!0,lineStyle:{color:theme("light")}}},yAxis:{type:"category",axisLabel:{rotate:30,color:theme("body-color"),margin:15},data:t.map(e=>e.name)},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},animationDurationUpdate:1e3,series:{type:"bar",id:"population",data:t.map(e=>e.value),universalTransition:!0},grid:{right:"5%",left:"13%",bottom:"10%",top:"5%"}}}t.sort(function(e,t){return e.value-t.value});let r="map",n=new CustomEChart({selector:mapBarMorphing,options:()=>("map"===r?a:o)()});setInterval(function(){r="map"===r?"bar":"map",n.chart.setOption(("map"===r?a:o)(),!0)},3e3)}).catch(e=>console.log(e)),document.getElementById("pie-chart-on-map")),geoSVGScatterMap=(pieChartOnMap&&fetch("assets/data/usa_geo.json").then(e=>e.json()).then(e=>{function t(e,t){var a=["A","B","C","D"].map(e=>({value:Math.round(100*Math.random()),name:"Category "+e}));return{type:"pie",coordinateSystem:"geo",tooltip:{formatter:"{b}: {c} ({d}%)",backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")}},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},label:{show:!1},labelLine:{show:!1},animationDuration:0,radius:t,center:e,data:a}}echarts.registerMap("USA",e,{Alaska:{left:-131,top:25,width:15},Hawaii:{left:-112,top:25,width:5},"Puerto Rico":{left:-76,top:26,width:2}}),new CustomEChart({selector:pieChartOnMap,options:()=>({geo:{map:"USA",roam:!0,itemStyle:{borderColor:theme("border-color"),areaColor:theme("chart-secondary")},label:{color:"#fff"},emphasis:{label:{show:!0,color:"#fff"},itemStyle:{areaColor:theme("chart-gamma")}}},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},tooltip:{backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")}},legend:{textStyle:{color:"#858d98"}},series:[t([-86.753504,33.01077],15),t([-116.853504,39.8],25),t([-99,31.5],30),t(540<+echarts.version.split(".").slice(0,3).join("")?"Maine":[-69,45.5],12)]})})}).catch(e=>console.log(e)),document.getElementById("geo-svg-scatter-map"));geoSVGScatterMap&&fetch("assets/images/svg/iceland.svg").then(e=>e.text()).then(e=>{echarts.registerMap("iceland",{svg:e});let t=new CustomEChart({selector:geoSVGScatterMap,options:()=>({tooltip:{},geo:{tooltip:{show:!0,backgroundColor:theme("secondary-bg"),borderColor:theme("border-color"),textStyle:{color:theme("light-text-emphasis")}},map:"iceland",layoutCenter:["50%","50%"],layoutSize:"125%",roam:!0},textStyle:{fontFamily:getComputedStyle(document.body).fontFamily},series:{type:"effectScatter",coordinateSystem:"geo",geoIndex:0,symbolSize:function(e){return e[2]/100*15+5},itemStyle:{color:"#b02a02"},encode:{tooltip:2},data:[[488.2358421078053,459.70913833075736,100],[770.3415644319939,757.9672194986475,30],[1180.0329284196291,743.6141808346214,80],[894.03790632245,1188.1985153835008,61],[1372.98925630313,477.3839988649537,70],[1378.62251255796,935.6708486282843,81]]}})});t.chart.on("selectchanged",function(e){e.selected.length?(e=e.selected[0].dataIndex[0],e=option.series.data[e][2],t.chart.dispatchAction({type:"geoSelect",geoIndex:0,name:e}),t.chart.dispatchAction({type:"showTip",geoIndex:0,name:e})):(t.chart.dispatchAction({type:"hideTip"}),t.chart.dispatchAction({type:"geoSelect",geoIndex:0}))})}).catch(e=>console.log(e));